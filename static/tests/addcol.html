<!DOCTYPE html>
<html>
<head>
<title>Adding columns to table</title>
<style>
    td { border: 1px; margin: 5px; }
</style>
</head>
<body>
<script>
var DEFAULT_ROW_COUNT = 1000;
var tableElement;

function setUp(opt_rowCount) {
  var rowCount = opt_rowCount || DEFAULT_ROW_COUNT;
  var tableBody = document.createElement('tbody');
  for (var i = 0; i < rowCount; i++) {
    var tableRow = document.createElement('tr');
    tableBody.appendChild(tableRow);
    var tableCell = document.createElement('td');
    tableCell.appendChild(document.createTextNode(i));
    tableRow.appendChild(tableCell);
  }

  tableElement = document.createElement('table');
  tableElement.appendChild(tableBody);
  document.body.appendChild(tableElement);
}

function tearDown() {
  tableElement.parentNode.removeChild(tableElement);
  tableElement = null;
}

function reset() {
  if (!tableElement) return;
  for (var i = 0; i < tableElement.rows.length; i++) {
    var tableRow = tableElement.rows[i];
    if (tableRow.lastChild != tableRow.firstChild) {
        tableRow.removeChild(tableRow.lastChild);
    }
  }
}

function test(opt_rowCount) {
  var rowCount = opt_rowCount || DEFAULT_ROW_COUNT;
  for (var i = 0; i < tableElement.rows.length; i++) {
      var tableRow = tableElement.rows[i];
      var tableCell = document.createElement('td');
      tableCell.appendChild(document.createTextNode(i));
      tableRow.appendChild(tableCell);
  }
  var tableRow = document.createElement('tr');
  tableElement.tBodies[0].appendChild(tableRow);
  var tableCell = document.createElement('td');
  tableCell.appendChild(document.createTextNode(tableElement.offsetHeight));
    tableRow.appendChild(tableCell);
  }

</script>
<script src="../test.js"></script>
</body>
</html>
