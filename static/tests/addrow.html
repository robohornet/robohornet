<!DOCTYPE html>
<html>
<head>
<title>Adding rows to table</title>
</head>
<body>
<script>
var DEFAULT_ROW_COUNT = 1000;
var tableElement;

function setUp() {
  var tableBody = document.createElement('tbody');
  tableElement = document.createElement('table');
  tableElement.appendChild(tableBody);
  document.body.appendChild(tableElement);
}

function tearDown() {
  tableElement.parentNode.removeChild(tableElement);
  tableElement = null;
}

function test(opt_rowCount) {
  var rowCount = opt_rowCount || DEFAULT_ROW_COUNT;
  var tableBody = tableElement.tBodies[0];
  for (var i = 0; i < rowCount; i++) {
    var tableRow = document.createElement('tr');
    tableBody.appendChild(tableRow);
    var tableCell = document.createElement('td');
    tableCell.appendChild(document.createTextNode(i));
    tableRow.appendChild(tableCell);
  }

  var tableRow = document.createElement('tr');
  tableElement.tBodies[0].appendChild(tableRow);

  var tableCell = document.createElement('td');
  tableCell.appendChild(document.createTextNode(tableElement.offsetHeight));
  tableRow.appendChild(tableCell);
  }
</script>
<script src="../test.js"></script>
</body>
</html>
